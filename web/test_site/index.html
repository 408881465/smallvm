<html>
    <head>
        <title>µBlocks Chrome extension test site</title>
        <script src="postal.js"></script>
        <script src="parser.js"></script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h1>µBlocks Chrome extension test site</h1>
        <input id="message" value="0x7C,0x01">
        <button onclick="sendMe()">Send to board</button>
        <h3>Messages received:</h3>
        <pre id="log"></div>
    </body>
    <script>
        var postal = new Postal('ws://localhost:9999/', onReceive),
            parser = new Parser();

        function sendMe () {
            var string = document.querySelector('#message').value;
            postal.send(
                string.split(',').map(
                    function (each) { 
                        return parseInt(each);
                    }
                ));
        };

        function onReceive (data) {
            parser.processRawData(data);
        };
    </script>
</html>
